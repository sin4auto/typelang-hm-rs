テストプラン

## 目的
- 言語実装の信頼性と将来の拡張性を担保するため、テストを開発フローの標準ステップとして定着させる
- コード変更に伴う副作用を早期に検出し、品質目標（カバレッジ/動作保証）を常時モニタリングする

## テスト対象と粒度
- `src` 配下を「評価器」「型推論」「ランタイム/ネイティブ連携」に分け、ユニットテストで仕様差異を素早く検出
- インタープリタ起動〜終了までを含む統合テストを `tests/` に配置し、正常系・境界系・エラー系すべてのシナリオを文章化
- プロット済みの入力例は `examples/` と連携し、再利用できるものはフィクスチャとして切り出す

## 品質目標
- カバレッジ目標：80%以上を維持。レポート（`cov.png`）を更新し、履歴をPRコメントに残す
- 重大度に応じた合格判定：クリティカル失敗は即修正、軽微な欠陥はIssue化し期限を設定
- エラー報告には再現手順・入力データ・期待結果を必ず添付し、後追いでの分析コストを削減

## 実行と自動化
- ローカル最小コマンドは `cargo test`、CIでは `cargo test --all --locked` を基本とし、`--features native` など追加機能はマトリクスで検証
- 長時間テストは `cargo test --test slow_cases` に隔離し、CIではデイリー/リリース前のみ実行
- 新規テストを追加した際は README あるいは `documents/plan/native-compile-spec.md` に手順や前提条件を追記し、開発者全員が再現できる状態を保つ

## 維持管理
- テストコードのリファクタリングで重複やハードコードを排除し、共通処理は専用モジュールかヘルパーに集約する
- カバレッジ変動・失敗傾向をスプリント単位でレビューし、未達項目にはテスト追加または仕様見直しのアクションを割り当てる
- 破壊的変更を伴うPRではテスト追加/更新の有無をチェックリスト化し、レビュアーが確認しやすい形式で提示する
